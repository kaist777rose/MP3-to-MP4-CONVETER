<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MP3 â†’ MP4 Converter</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  background:#f5f0e8;color:#2a2520;
  font-family:'Courier New',Courier,monospace;
  min-height:100vh;display:flex;flex-direction:column;
  align-items:center;padding:40px 20px 80px;
}
.header{
  width:100%;max-width:620px;
  border-bottom:2px solid #d4c9b0;
  padding-bottom:20px;margin-bottom:36px;
  display:flex;align-items:flex-end;justify-content:space-between;
}
.title-logo{font-size:clamp(28px,5vw,48px);font-weight:700;letter-spacing:-1px;line-height:1;color:#8b5e1a;}
.title-logo small{display:block;font-size:.42em;letter-spacing:3px;margin-top:4px;color:#6a5830;font-weight:700;}
.ver{font-size:10px;letter-spacing:2px;color:#5a4820;border:1px solid #c8bda0;padding:4px 8px;font-weight:800;}

.card{
  width:100%;max-width:620px;
  background:#fffdf7;border:1px solid #ddd5c0;
  border-radius:6px;padding:24px;margin-bottom:14px;
  box-shadow:0 2px 8px rgba(0,0,0,0.06);
}
.card-label{
  font-size:9px;letter-spacing:3px;color:#5a4820;
  text-transform:uppercase;font-weight:800;
  margin-bottom:16px;display:flex;align-items:center;gap:8px;
}
.card-label::after{content:'';flex:1;height:1px;background:#e8e0cc;}

.drop{
  border:1px dashed #c8bda0;border-radius:4px;
  padding:30px 16px;text-align:center;cursor:pointer;
  transition:all .2s;background:#faf7f0;
}
.drop:hover{border-color:#8b5e1a;background:#fdf8ee;}
.drop.active{border:1px solid #8b5e1a;background:#fdf4e0;}
.drop.over{border-color:#c9813a;background:#fdf0d8;}
.drop-ico{font-size:28px;opacity:.5;display:block;margin-bottom:8px;}
.drop-sub{font-size:11px;color:#5a4820;letter-spacing:1px;font-weight:700;}
.drop-name{font-size:11px;color:#7a4a0a;margin-top:8px;word-break:break-all;display:none;font-weight:800;}
.drop.active .drop-name{display:block;}
.drop.active .drop-sub{display:none;}
input[type=file]{display:none;}

.settings{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:4px;}
.s-item{background:#faf7f0;border:1px solid #e8e0cc;padding:14px;border-radius:4px;}
.s-item.full{grid-column:1/-1;}
.s-lbl{font-size:9px;letter-spacing:3px;color:#5a4820;text-transform:uppercase;margin-bottom:8px;display:block;font-weight:800;}
select,input[type=text]{
  background:#fff;border:1px solid #ddd5c0;
  color:#1a1510;font-family:inherit;font-size:11px;font-weight:700;
  padding:8px 10px;width:100%;outline:none;
  transition:border-color .2s;-webkit-appearance:none;border-radius:3px;
}
select:focus,input[type=text]:focus{border-color:#8b5e1a;}
select option{background:#fff;color:#2a2520;}

.clr-row{display:flex;gap:8px;align-items:center;}
.clr-box{width:34px;height:34px;border:1px solid #ddd5c0;flex-shrink:0;cursor:pointer;position:relative;overflow:hidden;border-radius:3px;}
.clr-box input[type=color]{position:absolute;inset:-4px;width:calc(100%+8px);height:calc(100%+8px);opacity:0;cursor:pointer;border:none;padding:0;}
.clr-fill{width:100%;height:100%;pointer-events:none;}
.clr-row input[type=text]{flex:1;}

/* Wave style picker */
.wave-styles{display:flex;gap:8px;flex-wrap:wrap;}
.ws{
  flex:1;min-width:80px;padding:9px 4px;text-align:center;
  border:1px solid #ddd5c0;border-radius:3px;
  font-size:9px;font-weight:800;letter-spacing:1px;
  color:#5a4820;cursor:pointer;background:#fff;
  transition:all .15s;text-transform:uppercase;
}
.ws.sel{border-color:#8b5e1a;background:#fdf4e0;color:#8b5e1a;}

/* Color theme chips */
.theme-chips{display:flex;gap:7px;flex-wrap:wrap;margin-top:2px;}
.chip{
  width:28px;height:28px;border-radius:50%;cursor:pointer;
  border:2px solid transparent;transition:all .15s;flex-shrink:0;
}
.chip.sel{border-color:#2a2520;transform:scale(1.18);}

/* Preview */
.preview-wrap{margin-top:16px;border:1px solid #ddd5c0;border-radius:4px;overflow:hidden;background:#000;display:none;}
.preview-wrap.show{display:block;}
.preview-wrap canvas{width:100%;display:block;}

/* Progress */
.prog-wrap{margin-top:16px;display:none;}
.prog-wrap.show{display:block;}
.prog-lbl{font-size:9px;letter-spacing:2px;color:#5a4820;margin-bottom:8px;font-weight:800;}
.prog-track{height:3px;background:#e8e0cc;overflow:hidden;border-radius:2px;}
.prog-bar{height:100%;background:linear-gradient(90deg,#c9813a,#e8a84c);width:0%;transition:width .35s;border-radius:2px;}
.prog-bar.anim{width:30%;animation:scan 1.2s ease-in-out infinite;}
@keyframes scan{0%{transform:translateX(-200%)}100%{transform:translateX(500%)}}
.prog-msg{font-size:12px;color:#4a3810;margin-top:8px;font-weight:700;}
.prog-msg.ok{color:#1a6030;font-weight:800;}
.prog-msg.err{color:#901010;font-weight:800;}

.btn-convert{
  width:100%;max-width:620px;background:#8b5e1a;color:#fff;
  border:none;font-family:inherit;font-size:16px;font-weight:800;
  letter-spacing:6px;text-transform:uppercase;padding:18px;
  cursor:pointer;transition:background .2s;margin-bottom:12px;border-radius:5px;
}
.btn-convert:hover{background:#a06d22;}
.btn-convert:disabled{background:#d4c9b0;color:#8a7848;cursor:not-allowed;}
.btn-dl{
  display:none;width:100%;max-width:620px;
  background:transparent;color:#1e6b3a;border:2px solid #1e6b3a;
  font-family:inherit;font-size:14px;font-weight:800;letter-spacing:5px;
  padding:16px;cursor:pointer;text-align:center;
  text-decoration:none;transition:all .2s;margin-bottom:12px;border-radius:5px;
}
.btn-dl.show{display:block;}
.btn-dl:hover{background:#1e6b3a;color:#fff;}
.btn-reset{
  font-size:11px;color:#8a7050;letter-spacing:2px;font-weight:700;
  cursor:pointer;text-align:center;display:block;
  width:100%;max-width:620px;transition:color .2s;text-transform:uppercase;
}
.btn-reset:hover{color:#8b5e1a;}
.fmt-note{font-size:11px;color:#5a4820;margin-top:10px;font-weight:700;text-align:center;line-height:1.6;width:100%;max-width:620px;}

@media(max-width:500px){.settings{grid-template-columns:1fr;}}
</style>
</head>
<body>

<div class="header">
  <div class="title-logo">MP3â†’MP4<small>// waveform visualizer</small></div>
  <span class="ver">NO SERVER</span>
</div>

<!-- Audio -->
<div class="card">
  <div class="card-label">ì˜¤ë””ì˜¤ íŒŒì¼</div>
  <div class="drop" id="mp3Zone">
    <span class="drop-ico">â™«</span>
    <span class="drop-sub">MP3 Â· WAV Â· M4A Â· AAC â€” í´ë¦­ ë˜ëŠ” ë“œë˜ê·¸</span>
    <span class="drop-name" id="mp3Name"></span>
    <input type="file" id="mp3Input">
  </div>
</div>

<!-- Background Image -->
<div class="card">
  <div class="card-label">ë°°ê²½ ì´ë¯¸ì§€ <span style="font-size:8px;letter-spacing:2px;color:#8b5e1a;background:#fdf4e0;border:1px solid #c8a848;padding:2px 8px;margin-left:4px;font-weight:800;">OPTIONAL</span></div>
  <div class="drop" id="bgImgZone">
    <span class="drop-ico" id="bgImgIco">ğŸ–¼</span>
    <span class="drop-sub" id="bgImgSub">JPG Â· PNG Â· WEBP â€” í´ë¦­ ë˜ëŠ” ë“œë˜ê·¸</span>
    <span class="drop-name" id="bgImgName"></span>
    <input type="file" id="bgImgInput">
  </div>
  <div class="img-thumb-wrap" id="bgThumbWrap" style="display:none;margin-top:12px;">
    <img id="bgThumbImg" style="width:100%;max-height:90px;object-fit:cover;border:1px solid #ddd5c0;border-radius:3px;opacity:.8;" src="" alt="">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px;">
      <span style="font-size:9px;letter-spacing:2px;color:#5a4820;font-weight:800;text-transform:uppercase;">ì´ë¯¸ì§€ ì–´ë‘¡ê¸°</span>
      <span style="font-size:11px;color:#8b5e1a;font-weight:800;" id="dimVal">65%</span>
    </div>
    <input type="range" id="dimSlider" min="0" max="95" value="65" style="width:100%;margin-top:6px;accent-color:#8b5e1a;">
    <button id="bgClearBtn" style="margin-top:10px;width:100%;background:transparent;border:1px solid #c8bda0;color:#8a7050;font-family:inherit;font-size:10px;font-weight:800;letter-spacing:3px;padding:7px;cursor:pointer;border-radius:3px;text-transform:uppercase;">âœ• ì´ë¯¸ì§€ ì œê±°</button>
  </div>
</div>

<!-- Settings -->
<div class="card">
  <div class="card-label">ì„¤ì •</div>
  <div class="settings">

    <div class="s-item full">
      <span class="s-lbl">ì˜ìƒ ì œëª© (íŒŒì¼ëª… ìë™ ì…ë ¥ Â· ìˆ˜ì • ê°€ëŠ¥)</span>
      <input type="text" id="songTitle" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
    </div>

    <div class="s-item full">
      <span class="s-lbl">ë¶€ì œëª© / ì•„í‹°ìŠ¤íŠ¸ëª…</span>
      <input type="text" id="songArtist" placeholder="ì•„í‹°ìŠ¤íŠ¸ëª… ë˜ëŠ” ë¶€ì œëª© (ì„ íƒ)">
    </div>

    <div class="s-item">
      <span class="s-lbl">í•´ìƒë„</span>
      <select id="resSelect">
        <option value="1920,1080">1920 Ã— 1080</option>
        <option value="1280,720" selected>1280 Ã— 720</option>
        <option value="854,480">854 Ã— 480</option>
        <option value="640,360">640 Ã— 360</option>
      </select>
    </div>

    <div class="s-item">
      <span class="s-lbl">ë¹„íŠ¸ë ˆì´íŠ¸</span>
      <select id="brSelect">
        <option value="4000000">ìµœê³  4 Mbps</option>
        <option value="2500000" selected>ê³ í’ˆì§ˆ 2.5 Mbps</option>
        <option value="1500000">ì¤‘ê°„ 1.5 Mbps</option>
        <option value="800000">ì €ìš©ëŸ‰ 0.8 Mbps</option>
      </select>
    </div>

    <div class="s-item">
      <span class="s-lbl">ë°°ê²½ ìƒ‰ìƒ</span>
      <div class="clr-row">
        <div class="clr-box">
          <div class="clr-fill" id="clrFill" style="background:#0a0a14"></div>
          <input type="color" id="clrPicker" value="#0a0a14">
        </div>
        <input type="text" id="clrText" value="#0a0a14" maxlength="7">
      </div>
    </div>

    <div class="s-item">
      <span class="s-lbl">íŒŒí˜• ìŠ¤íƒ€ì¼</span>
      <div class="wave-styles">
        <div class="ws" data-style="bars">â–Š ë§‰ëŒ€</div>
        <div class="ws" data-style="mirror">â¬¡ ë¯¸ëŸ¬</div>
        <div class="ws" data-style="line">ã€° ë¼ì¸</div>
        <div class="ws sel" data-style="circle">â— ì›í˜•</div>
      </div>
    </div>

    <div class="s-item full">
      <span class="s-lbl">ì»¬ëŸ¬ í…Œë§ˆ (ì›í˜• ë§ ìƒ‰ìƒ)</span>
      <div class="theme-chips" id="themeChips">
        <div class="chip sel" data-theme="cyan" style="background:linear-gradient(135deg,#00e5ff,#0066ff)" title="ì‚¬ì´ì–¸"></div>
        <div class="chip" data-theme="gold" style="background:linear-gradient(135deg,#ffd700,#ff6600)" title="ê³¨ë“œ"></div>
        <div class="chip" data-theme="purple" style="background:linear-gradient(135deg,#bf5fff,#ff3cac)" title="í¼í”Œ"></div>
        <div class="chip" data-theme="green" style="background:linear-gradient(135deg,#00ff88,#00ccaa)" title="ê·¸ë¦°"></div>
        <div class="chip" data-theme="red" style="background:linear-gradient(135deg,#ff4444,#ff8800)" title="ë ˆë“œ"></div>
        <div class="chip" data-theme="white" style="background:linear-gradient(135deg,#ffffff,#aaccff)" title="í™”ì´íŠ¸"></div>
      </div>
    </div>

    <div class="s-item full">
      <span class="s-lbl">ì¶œë ¥ íŒŒì¼ëª…</span>
      <input type="text" id="fname" value="output" placeholder="output">
    </div>

  </div>

  <!-- Preview -->
  <div class="preview-wrap" id="previewWrap">
    <canvas id="previewCanvas"></canvas>
  </div>

  <!-- Progress -->
  <div class="prog-wrap" id="progWrap">
    <div class="prog-lbl">// STATUS</div>
    <div class="prog-track"><div class="prog-bar" id="progBar"></div></div>
    <div class="prog-msg" id="progMsg"></div>
  </div>
</div>

<button class="btn-convert" id="btnConvert" disabled>CONVERT</button>
<a class="btn-dl" id="btnDl">â¬‡ DOWNLOAD</a>
<span class="btn-reset" id="btnReset">â†º ì´ˆê¸°í™”</span>
<p class="fmt-note" id="fmtNote"></p>

<script>
(function(){
  'use strict';

  // â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  let mp3File=null, outUrl=null, bgImg=null;
  let waveStyle='circle', colorTheme='cyan';

  // â”€â”€ Color themes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const THEMES={
    cyan:  { a:'#00e5ff', b:'#0066ff', glow:'rgba(0,229,255,', text:'#00e5ff' },
    gold:  { a:'#ffd700', b:'#ff6600', glow:'rgba(255,215,0,',  text:'#ffd700' },
    purple:{ a:'#bf5fff', b:'#ff3cac', glow:'rgba(191,95,255,', text:'#cc88ff' },
    green: { a:'#00ff88', b:'#00ccaa', glow:'rgba(0,255,136,',  text:'#00ff88' },
    red:   { a:'#ff4444', b:'#ff8800', glow:'rgba(255,68,68,',  text:'#ff6666' },
    white: { a:'#ffffff', b:'#aaccff', glow:'rgba(255,255,255,',text:'#ffffff' },
  };

  // â”€â”€ DOM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const $ = id => document.getElementById(id);
  const mp3Zone=$('mp3Zone'), mp3Input=$('mp3Input'), mp3NameEl=$('mp3Name');
  const bgImgZone=$('bgImgZone'), bgImgInput=$('bgImgInput'), bgImgName=$('bgImgName');
  const bgThumbWrap=$('bgThumbWrap'), bgThumbImg=$('bgThumbImg');
  const dimSlider=$('dimSlider'), dimVal=$('dimVal'), bgClearBtn=$('bgClearBtn');
  const resSelect=$('resSelect'), brSelect=$('brSelect'), fname=$('fname');
  const songTitle=$('songTitle'), songArtist=$('songArtist');
  const clrPicker=$('clrPicker'), clrText=$('clrText'), clrFill=$('clrFill');
  const progWrap=$('progWrap'), progBar=$('progBar'), progMsg=$('progMsg');
  const btnConvert=$('btnConvert'), btnDl=$('btnDl'), btnReset=$('btnReset');
  const fmtNote=$('fmtNote');
  const previewWrap=$('previewWrap'), previewCanvas=$('previewCanvas');

  // â”€â”€ Color sync â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function applyBg(hex){ clrPicker.value=hex; clrText.value=hex; clrFill.style.background=hex; }
  applyBg('#0a0a14');
  clrPicker.addEventListener('input',()=>applyBg(clrPicker.value));
  clrText.addEventListener('input',()=>{ if(/^#[0-9a-fA-F]{6}$/.test(clrText.value)) applyBg(clrText.value); });

  // â”€â”€ BG Image handlers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function loadBgImg(f){
    if(!f) return;
    const ok=f.type.startsWith('image')||/\.(jpe?g|png|webp|gif|heic)$/i.test(f.name)||f.type==='';
    if(!ok){ alert('ì´ë¯¸ì§€ íŒŒì¼ì„ ì„ íƒí•´ ì£¼ì„¸ìš”'); return; }
    const url=URL.createObjectURL(f);
    const img=new Image();
    img.onload=()=>{
      bgImg=img;
      bgImgName.textContent=f.name;
      bgImgZone.classList.add('active');
      bgThumbImg.src=url;
      bgThumbWrap.style.display='block';
      if(mp3File) drawStaticPreview();
    };
    img.src=url;
  }
  bgImgZone.addEventListener('click',()=>bgImgInput.click());
  bgImgInput.addEventListener('change',e=>loadBgImg(e.target.files[0]));
  bgImgZone.addEventListener('dragover',e=>{e.preventDefault();bgImgZone.classList.add('over');});
  bgImgZone.addEventListener('dragleave',()=>bgImgZone.classList.remove('over'));
  bgImgZone.addEventListener('drop',e=>{e.preventDefault();bgImgZone.classList.remove('over');loadBgImg(e.dataTransfer.files[0]);});

  dimSlider.addEventListener('input',()=>{
    dimVal.textContent=dimSlider.value+'%';
    if(mp3File) drawStaticPreview();
  });
  bgClearBtn.addEventListener('click',()=>{
    bgImg=null; bgImgInput.value='';
    bgImgName.textContent=''; bgImgZone.classList.remove('active');
    bgThumbWrap.style.display='none'; bgThumbImg.src='';
    if(mp3File) drawStaticPreview();
  });

  // â”€â”€ Wave style picker â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.querySelectorAll('.ws').forEach(btn=>{
    btn.addEventListener('click',()=>{
      document.querySelectorAll('.ws').forEach(b=>b.classList.remove('sel'));
      btn.classList.add('sel');
      waveStyle=btn.dataset.style;
      if(mp3File) drawStaticPreview();
    });
  });

  // â”€â”€ Color theme picker â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.querySelectorAll('.chip').forEach(chip=>{
    chip.addEventListener('click',()=>{
      document.querySelectorAll('.chip').forEach(c=>c.classList.remove('sel'));
      chip.classList.add('sel');
      colorTheme=chip.dataset.theme;
      if(mp3File) drawStaticPreview();
    });
  });

  // â”€â”€ File load â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function loadAudio(f){
    if(!f) return;
    const ok=f.type.startsWith('audio')||/\.(mp3|m4a|wav|aac|ogg|flac|aiff?)$/i.test(f.name)||f.type==='';
    if(!ok){ alert('ì˜¤ë””ì˜¤ íŒŒì¼ì„ ì„ íƒí•´ ì£¼ì„¸ìš”'); return; }
    mp3File=f;
    mp3NameEl.textContent=f.name;
    mp3Zone.classList.add('active');
    const auto=f.name.replace(/\.[^.]+$/,'').replace(/[-_]/g,' ');
    if(!songTitle.value) songTitle.value=auto;
    btnConvert.disabled=false;
    drawStaticPreview();
  }

  mp3Zone.addEventListener('click',()=>mp3Input.click());
  mp3Input.addEventListener('change',e=>loadAudio(e.target.files[0]));
  mp3Zone.addEventListener('dragover',e=>{e.preventDefault();mp3Zone.classList.add('over');});
  mp3Zone.addEventListener('dragleave',()=>mp3Zone.classList.remove('over'));
  mp3Zone.addEventListener('drop',e=>{ e.preventDefault();mp3Zone.classList.remove('over'); loadAudio(e.dataTransfer.files[0]); });

  // Redraw preview on settings change
  [clrPicker,clrText,songTitle,songArtist,resSelect,dimSlider].forEach(el=>{
    el.addEventListener('input',()=>{ if(mp3File) drawStaticPreview(); });
    el.addEventListener('change',()=>{ if(mp3File) drawStaticPreview(); });
  });

  function drawStaticPreview(){
    const [W,H]=resSelect.value.split(',').map(Number);
    previewCanvas.width=W; previewCanvas.height=H;
    previewWrap.classList.add('show');
    const ctx=previewCanvas.getContext('2d');
    const fake=new Uint8Array(256);
    // Fake waveform for preview
    for(let i=0;i<256;i++) fake[i]=100+Math.sin(i*0.25)*60+Math.random()*30;
    drawFrame(ctx,W,H,fake,songTitle.value,songArtist.value,clrText.value,colorTheme,waveStyle,0,bgImg,parseInt(dimSlider.value));
  }

  // â”€â”€ Master frame renderer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function drawFrame(ctx,W,H,dataArr,title,artist,bg,theme,style,t,bgImage,dimPct){
    const T=THEMES[theme]||THEMES.cyan;

    // 1. Background â€” image or solid color
    if(bgImage){
      // Cover-fit: fill entire canvas, center-crop
      const iw=bgImage.naturalWidth||bgImage.width;
      const ih=bgImage.naturalHeight||bgImage.height;
      const scale=Math.max(W/iw, H/ih);
      const sw=iw*scale, sh=ih*scale;
      const ox=(W-sw)/2, oy=(H-sh)/2;
      ctx.drawImage(bgImage, ox, oy, sw, sh);
      // Dim overlay
      const dim=(dimPct||65)/100;
      ctx.fillStyle=`rgba(0,0,0,${dim})`;
      ctx.fillRect(0,0,W,H);
    } else {
      ctx.fillStyle=bg;
      ctx.fillRect(0,0,W,H);
    }

    // 2. Vignette
    const vig=ctx.createRadialGradient(W/2,H/2,H*0.15,W/2,H/2,H*0.8);
    vig.addColorStop(0,'rgba(0,0,0,0)');
    vig.addColorStop(1,'rgba(0,0,0,0.72)');
    ctx.fillStyle=vig;
    ctx.fillRect(0,0,W,H);

    // 3. Waveform
    if(style==='circle')      drawCircleViz(ctx,W,H,dataArr,T,t);
    else if(style==='bars')   drawBars(ctx,W,H,dataArr,T,t);
    else if(style==='mirror') drawMirror(ctx,W,H,dataArr,T,t);
    else if(style==='line')   drawLine(ctx,W,H,dataArr,T,t);

    // 4. Title & artist text
    drawText(ctx,W,H,title,artist,T,style);
  }

  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  // â— CIRCLE VISUALIZER
  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  function drawCircleViz(ctx,W,H,data,T,t){
    const cx=W/2, cy=H/2;
    const baseR=Math.min(W,H)*0.21;
    const n=data.length; // 128 frequency bins

    ctx.save();

    // â”€â”€ Outer rotating hue-shift rings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const numRings=4;
    for(let r=0;r<numRings;r++){
      const progress=r/numRings;
      const ringR=baseR*(1.55+progress*0.6);
      // Hue oscillation per ring (each ring shifts independently)
      const hueShift=(t*60 + r*90)%360;
      const alpha=0.12-progress*0.02;
      const lw=Math.max(1, (4-r)*1.2*(W/1280));

      ctx.beginPath();
      ctx.arc(cx,cy,ringR,0,Math.PI*2);
      ctx.strokeStyle=hslToHex(hueShift, 100, 70);
      ctx.lineWidth=lw;
      ctx.globalAlpha=alpha;
      ctx.stroke();
    }
    ctx.globalAlpha=1;

    // â”€â”€ Energy: average amplitude in freq bands â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const bass=avg(data,0,8)/255;
    const mid=avg(data,8,64)/255;
    const high=avg(data,64,128)/255;
    const energy=bass*0.6+mid*0.3+high*0.1;

    // â”€â”€ Pulsing glow disc behind circle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const pulseR=baseR*(1+energy*0.35);
    const gDisc=ctx.createRadialGradient(cx,cy,0,cx,cy,pulseR*1.2);
    gDisc.addColorStop(0, T.glow+'0.18)');
    gDisc.addColorStop(0.5, T.glow+'0.07)');
    gDisc.addColorStop(1,   T.glow+'0)');
    ctx.fillStyle=gDisc;
    ctx.beginPath();
    ctx.arc(cx,cy,pulseR*1.2,0,Math.PI*2);
    ctx.fill();

    // â”€â”€ Color-rotating inner ring (main) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const hMain=(t*45)%360;
    const ringColor=hslToHex(hMain,100,62);
    const ringGlow =hslToHex(hMain,100,75);

    // Outer rim
    ctx.beginPath();
    ctx.arc(cx,cy,baseR*1.12,0,Math.PI*2);
    ctx.strokeStyle=ringColor;
    ctx.lineWidth=2*(W/1280);
    ctx.shadowColor=ringGlow;
    ctx.shadowBlur=18*(W/1280);
    ctx.globalAlpha=0.7;
    ctx.stroke();
    ctx.shadowBlur=0; ctx.globalAlpha=1;

    // Inner rim
    ctx.beginPath();
    ctx.arc(cx,cy,baseR*0.88,0,Math.PI*2);
    ctx.strokeStyle=hslToHex((hMain+180)%360,100,65);
    ctx.lineWidth=1.2*(W/1280);
    ctx.globalAlpha=0.5;
    ctx.stroke();
    ctx.globalAlpha=1;

    // â”€â”€ Dotted orbit ring â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const dotR=baseR*1.32;
    const dotN=64;
    for(let i=0;i<dotN;i++){
      const ang=(i/dotN)*Math.PI*2 + t*0.4;
      const dx=cx+Math.cos(ang)*dotR;
      const dy=cy+Math.sin(ang)*dotR;
      const dHue=(hMain+i*(360/dotN))%360;
      ctx.beginPath();
      ctx.arc(dx,dy,1.8*(W/1280),0,Math.PI*2);
      ctx.fillStyle=hslToHex(dHue,100,70);
      ctx.globalAlpha=0.55;
      ctx.fill();
    }
    ctx.globalAlpha=1;

    // â”€â”€ Waveform spikes INSIDE circle (inward) â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const innerSpikes=n;
    for(let i=0;i<innerSpikes;i++){
      const ang=(i/innerSpikes)*Math.PI*2 - Math.PI/2;
      const v=data[i]/255;
      const spikeLen=v*baseR*0.78;
      const hue=(hMain + (i/innerSpikes)*160)%360;
      const col=hslToHex(hue,100,60+v*30);
      const alpha=0.55+v*0.4;

      // From inner edge inward
      const x1=cx+Math.cos(ang)*baseR*0.85;
      const y1=cy+Math.sin(ang)*baseR*0.85;
      const x2=cx+Math.cos(ang)*(baseR*0.85-spikeLen);
      const y2=cy+Math.sin(ang)*(baseR*0.85-spikeLen);

      ctx.beginPath();
      ctx.moveTo(x1,y1);
      ctx.lineTo(x2,y2);
      ctx.strokeStyle=col;
      ctx.lineWidth=Math.max(1,2*(W/1280));
      ctx.shadowColor=col;
      ctx.shadowBlur=v*12*(W/1280);
      ctx.globalAlpha=alpha;
      ctx.stroke();
    }
    ctx.shadowBlur=0; ctx.globalAlpha=1;

    // â”€â”€ Waveform spikes OUTSIDE circle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    for(let i=0;i<n;i++){
      const ang=(i/n)*Math.PI*2 - Math.PI/2;
      const v=data[i]/255;
      const maxSpike=baseR*0.55;
      const spikeLen=v*maxSpike;
      const hue=(hMain+30 + (i/n)*200)%360;
      const col=hslToHex(hue,100,55+v*35);
      const alpha=0.6+v*0.35;

      const x1=cx+Math.cos(ang)*baseR*1.12;
      const y1=cy+Math.sin(ang)*baseR*1.12;
      const x2=cx+Math.cos(ang)*(baseR*1.12+spikeLen);
      const y2=cy+Math.sin(ang)*(baseR*1.12+spikeLen);

      ctx.beginPath();
      ctx.moveTo(x1,y1);
      ctx.lineTo(x2,y2);
      ctx.strokeStyle=col;
      ctx.lineWidth=Math.max(1,1.8*(W/1280));
      ctx.shadowColor=col;
      ctx.shadowBlur=v*14*(W/1280);
      ctx.globalAlpha=alpha;
      ctx.stroke();
    }
    ctx.shadowBlur=0; ctx.globalAlpha=1;

    // â”€â”€ Center pulsing core â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const coreR=baseR*0.28*(0.9+energy*0.25);
    const coreG=ctx.createRadialGradient(cx,cy,0,cx,cy,coreR);
    coreG.addColorStop(0,   T.glow+'0.55)');
    coreG.addColorStop(0.5, T.glow+'0.18)');
    coreG.addColorStop(1,   T.glow+'0)');
    ctx.fillStyle=coreG;
    ctx.beginPath();
    ctx.arc(cx,cy,coreR,0,Math.PI*2);
    ctx.fill();

    // â”€â”€ Rotating cross lines â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const crossLen=baseR*0.6;
    for(let c=0;c<4;c++){
      const ang=t*0.8 + c*Math.PI/2;
      ctx.beginPath();
      ctx.moveTo(cx+Math.cos(ang)*baseR*0.25, cy+Math.sin(ang)*baseR*0.25);
      ctx.lineTo(cx+Math.cos(ang)*crossLen,   cy+Math.sin(ang)*crossLen);
      ctx.strokeStyle=ringColor;
      ctx.lineWidth=1*(W/1280);
      ctx.globalAlpha=0.25;
      ctx.stroke();
    }
    ctx.globalAlpha=1;

    ctx.restore();
  }

  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  // â–Š BARS
  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  function drawBars(ctx,W,H,data,T,t){
    const n=Math.min(data.length,100);
    const gap=W/n;
    const barW=gap*0.65;
    const zoneH=H*0.4;
    const hBase=(t*50)%360;
    ctx.save();
    for(let i=0;i<n;i++){
      const v=data[i]/255;
      const bh=Math.max(3,v*zoneH);
      const x=i*gap+(gap-barW)/2;
      const hue=(hBase+i*(180/n))%360;
      const col=hslToHex(hue,100,55+v*30);
      const gr=ctx.createLinearGradient(0,H/2-bh/2,0,H/2+bh/2);
      gr.addColorStop(0,colorAlpha(col,0.2));
      gr.addColorStop(0.5,col);
      gr.addColorStop(1,colorAlpha(col,0.2));
      ctx.fillStyle=gr;
      ctx.shadowColor=col;
      ctx.shadowBlur=v*12*(W/1280);
      rr(ctx,x,H/2-bh/2,barW,bh,2);
      ctx.fill();
    }
    ctx.shadowBlur=0; ctx.restore();
  }

  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  // â¬¡ MIRROR
  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  function drawMirror(ctx,W,H,data,T,t){
    const n=Math.min(data.length,100);
    const gap=W/n;
    const barW=gap*0.6;
    const zoneH=H*0.2;
    const hBase=(t*50)%360;
    ctx.save();
    for(let i=0;i<n;i++){
      const v=data[i]/255;
      const bh=Math.max(2,v*zoneH);
      const x=i*gap+(gap-barW)/2;
      const hue=(hBase+i*(200/n))%360;
      const col=hslToHex(hue,100,55+v*30);
      const gr=ctx.createLinearGradient(0,H/2-bh,0,H/2+bh);
      gr.addColorStop(0,colorAlpha(col,0.15));
      gr.addColorStop(0.5,col);
      gr.addColorStop(1,colorAlpha(col,0.15));
      ctx.fillStyle=gr;
      ctx.shadowColor=col;
      ctx.shadowBlur=v*10*(W/1280);
      rr(ctx,x,H/2-bh,barW,bh,2); ctx.fill();
      rr(ctx,x,H/2,barW,bh,2); ctx.fill();
    }
    ctx.shadowBlur=0; ctx.restore();
  }

  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  // ã€° LINE
  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  function drawLine(ctx,W,H,data,T,t){
    const n=data.length;
    const hBase=(t*40)%360;
    ctx.save();
    ctx.beginPath();
    for(let i=0;i<n;i++){
      const x=(i/n)*W;
      const v=(data[i]/255-0.5);
      const y=H/2+v*H*0.35;
      i===0?ctx.moveTo(x,y):ctx.lineTo(x,y);
    }
    const lineH=(t*40)%360;
    ctx.strokeStyle=hslToHex(lineH,100,65);
    ctx.lineWidth=Math.max(2,3*(W/1280));
    ctx.shadowColor=hslToHex(lineH,100,75);
    ctx.shadowBlur=16*(W/1280);
    ctx.lineJoin='round';
    ctx.stroke();
    // fill area
    ctx.lineTo(W,H/2); ctx.lineTo(0,H/2); ctx.closePath();
    ctx.fillStyle=colorAlpha(hslToHex(lineH,100,65),0.08);
    ctx.shadowBlur=0;
    ctx.fill();
    ctx.restore();
  }

  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  // TEXT
  // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  function drawText(ctx,W,H,title,artist,T,style){
    if(!title && !artist) return;
    const isCircle=(style==='circle');
    // For circle: text at bottom (like reference image)
    // For others: text at top
    const titleY = isCircle ? H*0.82 : H*0.18;
    const artistY= isCircle ? H*0.89 : H*0.26;

    ctx.save();
    ctx.textAlign='center';
    ctx.textBaseline='middle';

    if(title){
      const fs=Math.round(H*0.052);
      ctx.font=`700 ${fs}px 'Courier New', monospace`;
      // Glow
      ctx.shadowColor=T.glow+'0.9)';
      ctx.shadowBlur=H*0.02;
      ctx.fillStyle='#ffffff';
      ctx.fillText(title, W/2, titleY, W*0.82);
    }

    if(artist){
      const fs2=Math.round(H*0.032);
      ctx.font=`400 ${fs2}px 'Courier New', monospace`;
      ctx.shadowColor=T.glow+'0.6)';
      ctx.shadowBlur=H*0.015;
      ctx.fillStyle=T.text;
      ctx.globalAlpha=0.9;
      ctx.fillText(artist, W/2, artistY, W*0.75);
      ctx.globalAlpha=1;
    }

    // separator line
    if(title){
      const lw=W*0.14;
      const lineY=isCircle ? H*0.857 : H*0.235;
      ctx.shadowBlur=0;
      ctx.strokeStyle=T.a;
      ctx.lineWidth=1.5;
      ctx.globalAlpha=0.5;
      ctx.beginPath();
      ctx.moveTo(W/2-lw/2, lineY);
      ctx.lineTo(W/2+lw/2, lineY);
      ctx.stroke();
      ctx.globalAlpha=1;
    }
    ctx.restore();
  }

  // â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function hslToHex(h,s,l){
    s/=100; l/=100;
    const a=s*Math.min(l,1-l);
    const f=n=>{const k=(n+h/30)%12; const color=l-a*Math.max(Math.min(k-3,9-k,1),-1); return Math.round(255*color).toString(16).padStart(2,'0');};
    return `#${f(0)}${f(8)}${f(4)}`;
  }
  function colorAlpha(hex,a){
    const r=parseInt(hex.slice(1,3),16);
    const g=parseInt(hex.slice(3,5),16);
    const b=parseInt(hex.slice(5,7),16);
    return `rgba(${r},${g},${b},${a})`;
  }
  function avg(arr,s,e){ let sum=0; for(let i=s;i<e;i++) sum+=arr[i]; return sum/(e-s); }
  function rr(ctx,x,y,w,h,r){
    ctx.beginPath();
    ctx.moveTo(x+r,y);
    ctx.lineTo(x+w-r,y); ctx.quadraticCurveTo(x+w,y,x+w,y+r);
    ctx.lineTo(x+w,y+h-r); ctx.quadraticCurveTo(x+w,y+h,x+w-r,y+h);
    ctx.lineTo(x+r,y+h); ctx.quadraticCurveTo(x,y+h,x,y+h-r);
    ctx.lineTo(x,y+r); ctx.quadraticCurveTo(x,y,x+r,y);
    ctx.closePath();
  }

  // â”€â”€ MIME detection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function bestMime(){
    const list=['video/mp4;codecs=avc1.42E01E,mp4a.40.2','video/mp4','video/webm;codecs=vp9,opus','video/webm;codecs=vp8,opus','video/webm'];
    for(const m of list) if(MediaRecorder.isTypeSupported(m)) return m;
    return '';
  }

  function setStatus(msg,cls=''){ progWrap.classList.add('show'); progMsg.className='prog-msg'+(cls?' '+cls:''); progMsg.textContent=msg; }
  function setProgress(pct){ progBar.className='prog-bar'; progBar.style.width=pct+'%'; }
  function setSpinner(){ progBar.className='prog-bar anim'; }

  // â”€â”€ CONVERT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  btnConvert.addEventListener('click', async()=>{
    if(!mp3File) return;
    btnConvert.disabled=true;
    btnDl.classList.remove('show');
    fmtNote.textContent='';
    setSpinner();
    setStatus('ì˜¤ë””ì˜¤ ë””ì½”ë”© ì¤‘...');

    try{
      const AC=window.AudioContext||window.webkitAudioContext;
      const ac=new AC();
      const buf=await mp3File.arrayBuffer();
      const audioBuf=await ac.decodeAudioData(buf);

      const [W,H]=resSelect.value.split(',').map(Number);
      const cv=document.createElement('canvas');
      cv.width=W; cv.height=H;
      const ctx=cv.getContext('2d');

      // Analyser
      const analyser=ac.createAnalyser();
      analyser.fftSize=256;
      analyser.smoothingTimeConstant=0.82;
      const dataArr=new Uint8Array(analyser.frequencyBinCount); // 128 bins

      const dest=ac.createMediaStreamDestination();
      const src=ac.createBufferSource();
      src.buffer=audioBuf;
      src.connect(analyser);
      analyser.connect(dest);

      // Stream
      const vs=cv.captureStream(30);
      const stream=new MediaStream([...vs.getVideoTracks(),...dest.stream.getAudioTracks()]);

      const mime=bestMime();
      const isMP4=mime.toLowerCase().includes('mp4');
      const ext=isMP4?'mp4':'webm';
      fmtNote.textContent=isMP4?'ì¶œë ¥ í¬ë§·: MP4 (H.264 + AAC)':'ì¶œë ¥ í¬ë§·: WebM (VLC / Chromeì—ì„œ ì¬ìƒ ê°€ëŠ¥)';

      const opts=mime?{mimeType:mime,videoBitsPerSecond:+brSelect.value}:{};
      const rec=new MediaRecorder(stream,opts);
      const chunks=[];
      rec.ondataavailable=e=>{if(e.data.size>0) chunks.push(e.data);};

      const dur=audioBuf.duration;
      setProgress(0);
      setStatus('ë³€í™˜ ì¤‘... 0%');
      let elapsed=0;
      const tick=setInterval(()=>{
        elapsed+=0.5;
        const p=Math.min(97,Math.round(elapsed/dur*100));
        setProgress(p); setStatus(`ë³€í™˜ ì¤‘... ${p}%`);
      },500);

      // Snapshot settings
      const title=songTitle.value.trim();
      const artist=songArtist.value.trim();
      const bg=clrText.value;
      const theme=colorTheme;
      const style=waveStyle;
      const snapBgImg=bgImg;
      const snapDim=parseInt(dimSlider.value);

      // rAF: draw waveform each frame
      const startTime=ac.currentTime;
      let rafRunning=true;

      // Preview canvas mirrors the recording canvas
      previewCanvas.width=W; previewCanvas.height=H;
      previewWrap.classList.add('show');
      const preCtx=previewCanvas.getContext('2d');

      function rafLoop(){
        if(!rafRunning) return;
        analyser.getByteFrequencyData(dataArr);
        const t=ac.currentTime-startTime;
        drawFrame(ctx,W,H,dataArr,title,artist,bg,theme,style,t,snapBgImg,snapDim);
        preCtx.drawImage(cv,0,0);
        requestAnimationFrame(rafLoop);
      }
      rafLoop();

      src.start();
      rec.start(100);

      await new Promise((res,rej)=>{
        src.onended=()=>{ rafRunning=false; rec.stop(); vs.getTracks().forEach(t=>t.stop()); };
        rec.onstop=res;
        rec.onerror=e=>rej(e.error||new Error('MediaRecorder ì˜¤ë¥˜'));
      });

      clearInterval(tick);
      setProgress(100);
      setStatus('âœ“ ë³€í™˜ ì™„ë£Œ!','ok');

      const blob=new Blob(chunks,{type:mime||'video/webm'});
      if(outUrl) URL.revokeObjectURL(outUrl);
      outUrl=URL.createObjectURL(blob);
      const n=(fname.value.trim()||'output').replace(/\.(mp4|webm)$/i,'')+'.'+ext;
      btnDl.href=outUrl; btnDl.download=n;
      btnDl.textContent='â¬‡  DOWNLOAD  '+n.toUpperCase();
      btnDl.classList.add('show');
      ac.close();

    }catch(err){
      console.error(err);
      setProgress(0);
      setStatus('âœ• ì˜¤ë¥˜: '+(err.message||String(err)),'err');
    }finally{
      btnConvert.disabled=!mp3File;
    }
  });

  // â”€â”€ Reset â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  btnReset.addEventListener('click',()=>{
    mp3File=null; mp3Input.value='';
    mp3NameEl.textContent=''; mp3Zone.classList.remove('active','over');
    bgImg=null; bgImgInput.value='';
    bgImgName.textContent=''; bgImgZone.classList.remove('active');
    bgThumbWrap.style.display='none'; bgThumbImg.src='';
    progWrap.classList.remove('show'); progBar.style.width='0%'; progBar.className='prog-bar';
    btnDl.classList.remove('show'); previewWrap.classList.remove('show');
    fname.value='output'; fmtNote.textContent='';
    songTitle.value=''; songArtist.value='';
    if(outUrl){URL.revokeObjectURL(outUrl);outUrl=null;}
    btnConvert.disabled=true;
  });

})();
</script>
</body>
</html>
